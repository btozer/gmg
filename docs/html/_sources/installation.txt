.. _installation:

Installation
============

Pre-Installation
----------------

.. note::

    GMG is written in Python 3. 

**Step 1: Install Miniforge**

The simplest way to install GMG is to first install Miniforge (a minimal installer for `Conda <http://docs.conda.io/en/latest/>`_
specifically for `conda-forge <http://conda-forge.org>`_).

This should ensure you can install all the dependencies required on any platform (Linux, Mac, Windows) using the Conda
package manager.

**Step 2: Create a new python environment for gmg**

It may be useful to create a new conda environment to use when running GMG. This will avoid any potential conflicts 
with your current system configuration. e.g.::

    conda create -n gmg

Where the -n flag dictates what you want to name the new environment (you can call the environment whatever you like
but the documentation will use the name gmg-env).

On macOS and Linux this environment can then be activated using::

    conda activate gmg

Or on Windows use::

    activate gmg

Once the environment is activated any call to python will only "see" the packages install within the gmg-env
environment. To deactivate the environment either close the terminal window or on macOS and Linux run::

    conda deactivate

Or on Windows use::

    deactivate

**OS Support:**

GMG is (for the time being) only tested on macOS Monterey and Ubuntu 22.04 Linux operating systems. It is possible
that issues may arise when trying to install on other distributions. Please raise any information regarding
installation problems on github.

Installing gmg
--------------

**Step 1:**

Ensure your gmg-env environment is active, on macOS or Linux use::

    source activate gmg-env

Or on Windows use::

    activate gmg-env

**Step 2: Download gmg**

Download or "git clone" the gmg github repository.

*Option 1. Download:*

In your browser, navigate to::

    https://github.com/btozer/gmg

Use the green **clone or download** button on the right hand side of the page to download a .zip of gmg. Unzip this
directory.

*Option 2. git clone:*

If you have git installed, simply use git on the command line::

    git clone https://github.com/btozer/gmg.git

This will create a copy of the GMG repository in the current working directory.

**Step 3: Install  gmg**

Run the following command in the gmg/ root directory (which contains the script **setup.py**)::

    pip install .

This will install gmg within your local anaconda python site-packages dir.


Launching gmg
-------------

To start gmg, the best way is to create an alias within your .bashrc or equivalent file
(e.g. .bash_profile, .bashrc, .zshrc or .cshrc) e.g.::

    vi .bashrc

and then add the line::

    alias gmg='python ~/anaconda3/envs/gmg-env/lib/python3.7/site-packages/gmg/gmg.py'

NB. for macOS users you may need to invoke pythonw instead of python if you receive the message::

    This program needs access to the screen. Please run with a
    Framework build of python, and only when you are logged in
    on the main display of your Mac.

i.e.::

    alias gmg='pythonw ~/anaconda3/envs/gmg-env/lib/python3.7/site-packages/gmg/gmg.py'

Now, in a fresh terminal, simple type "gmg" on the command line to launch the software::

    gmg

The splash screen and model shell should appear as shown below:

.. figure:: _static/gmg_splash_screen.png
    :name: gmg_splash_screen